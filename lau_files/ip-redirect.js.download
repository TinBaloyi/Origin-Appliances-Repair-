"use strict";!function(e){if(document.querySelector(".redirect-modal")){if(!function(e){var n=("; "+document.cookie).split("; "+e+"=");if(2==n.length)return n.pop().split(";").shift()}("STYXKEY_ca_no_redirect")){var n={US:0,MX:1,CA:2,DO:3,PR:4},t={method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"}},o=function(o){if(o){var r=t;r.body="action=add_dropdown_cookie",r.body+="&index="+n[o],fetch(ajaxurl,r).then((function(n){if(200===n.status){var t=function(e){var n=document.querySelector(".wpml-lang-selector");if(n){var t="";""!==window.location.search.substring(1)&&(t="?"+window.location.search.substring(1));var o="#";return n.querySelector(".icl-"+e+" > a")&&(o=n.querySelector(".icl-"+e+" > a").href+t),o}}("es");t&&t!==window.location.href&&"#"!==t&&(window.location.href=t),e(".redirect-modal").modal("hide")}})).catch((function(e){}))}},r=function(n){if(n.content&&n.response){var r=document.querySelector(".redirect-modal"),c=r.querySelector(".modal-body"),i=r.querySelector(".btn--continue"),a=r.querySelector(".btn--cancel .content"),l=n.response.country,u=n.content;if(c.innerHTML="<p>"+u.message+"</p>",i.innerHTML=u.continue,a.innerHTML=u.cancel,c.querySelector(".country-name"))c.querySelector(".country-name").innerHTML=l;e(".redirect-modal").modal(),i.addEventListener("click",(function(e){e.preventDefault(),function(e){if(e){var n=t;n.body="action=log_redirect_ips",n.body+="&response_data="+JSON.stringify(e),fetch(ajaxurl,n).catch((function(e){}))}}(n.response),n.url?window.location.href=n.url:o(n.response.countryCode)}))}},c=navigator.language;c.split("-")[0].length&&(c=c.split("-")[0]);var i=t;i.body="action=check_user_location",i.body+="&wpml_lang="+wpml_lang,i.body+="&browser_lang="+c,fetch(ajaxurl,i).then((function(e){200===e.status&&e.json().then((function(e){e.default_rfc_country&&localStorage.setItem("default_rfc_country",e.default_rfc_country),e.redirect&&r(e)}))})).catch((function(e){}))}}}(jQuery);
//# sourceMappingURL=maps/ip-redirect.js.map
