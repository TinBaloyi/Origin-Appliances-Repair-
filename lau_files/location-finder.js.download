"use strict";document.addEventListener("readystatechange",(function(t){"complete"===t.target.readyState&&function(t){if(!document.querySelector(".page-template-tempate-landing-page-august-2017")){var a=function(t){var a=("; "+document.cookie).split("; "+t+"=");if(2==a.length)return a.pop().split(";").shift()},e=function(a,e){t.ajax({type:"GET",url:a,headers:{"Cache-control":"max-age=86400, public",Pragma:"cache"},cache:!0,data:e,success:function(a){var n=JSON.parse(a);200==n.code&&(e.hasOwnProperty("market_id")&&(localStorage.setItem("cc-market-url"+e.market_id,n.url),localStorage.setItem("cc-market-target"+e.market_id,n.target),localStorage.setItem("cc-market-name"+e.market_id,n.name)),t(".location-found").each((function(){t(this).siblings().addClass("inactive").hide(),t(this).removeClass("hide").find(".market-name").attr("href",n.url).attr("target",n.target).html(n.name)})))}})};t(".lf-finder").on("click",(function(a){a.preventDefault(),a.stopPropagation();var e=t(this);return e.attr("disabled",!0),setTimeout((function(){var a,n=e.parent().parent(),o=n.find('[name="lf"]').val();return""!==o&&"false"!==o||(o=n.find(".autocomplete").val(),n.find('[name="lf"]').val(o)),null==o.match(/\d+/g)&&o.indexOf(",")<0?(t(".not-valid-modal").modal(),e.attr("disabled",!1),!1):(a=n.hasClass("design-consultant-form")?"our-designers":"default",""===n.find(".hidden-field").val()&&""!=n.find('[name="lf"]').val()&&void t.ajax({url:ajaxurl,async:!1,data:{action:"location-finder",search:n.find('[name="lf"]').val(),area:n.find(".selected").data("attr"),form:a,honeypot:n.find(".hidden-field").val(),nonce:n.find(".nonce").val(),wpml_lang:wpml_lang},method:"POST",dataType:"json",beforeSend:function(){e.attr("disabled",!0)},success:function(a){if(t(".mobile-header .mobile-locate-me a").removeClass("active"),""==a.errors){var n=window.open(a.url,a.target);"_self"!==a.target&&(null==n?t(".location-found-modal").find(".location-found-link").attr("href",a.url).attr("target",a.target).on("click",(function(t){window.setTimeout((function(){window.location.reload()}),1e3)})).end().modal():"_blank"===a.target&&window.setTimeout((function(){window.location.reload()}),1e3)),e.attr("disabled",!1)}else e.attr("disabled",!1),t(".not-found-modal").modal()},error:function(t,a,n){e.attr("disabled",!1)}}))}),500),!1})),t("body").on("click",".lf-change",(function(a){var e;a.stopPropagation(),(e=t(this).parent().hasClass("market__links")?t(this).parents(".location-found"):t(this).parent().parent().hasClass("showroom-cookie")?t(this).parent().parent():t(this).parent()).hide(),t(this).parent("div").find(".inactive").show(),e.hasClass("showroom-cookie")?e.next().css("display","table-cell"):e.next().show(),t(document.body).on("click.location-finder",(function(){var a=t(this);e.show(),t(".lf-form.inactive").hide(),t(".inactive.mobile-form").hide(),a.off("click.location-finder")}))})),t(".lf-form").on("click",(function(t){t.stopPropagation()})),function(){var n={action:"calclosets_location_found"},o=function(t){var a,e=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<e.length;a++){var n=e[a].split("=");if(n[0]===t)return void 0===n[1]||n[1]}};if(o("CC1")?n.franchise_id=o("CC1"):a("STYXKEY_lf_market")&&(n.market_id=a("STYXKEY_lf_market")),n.hasOwnProperty("market_id")){var i=localStorage.getItem("cc-market-url"+n.market_id),r=localStorage.getItem("cc-market-target"+n.market_id),l=localStorage.getItem("cc-market-name"+n.market_id);i&&r&&l?t(".location-found").each((function(){t(this).siblings().addClass("inactive").hide(),t(this).removeClass("hide").find(".market-name").attr("href",i).attr("target",r).html(l)})):e(ajaxurl,n)}else e(ajaxurl,n)}()}}(jQuery)}));
//# sourceMappingURL=maps/location-finder.js.map
